{"version":3,"sources":["main.js"],"names":["l","data","console","log","getRandomInt","min","max","Math","floor","random","lazyLoadImages","selector","$","each","$this","this","windowWidth","window","width","retina","largeImageThreshold","attr","largest","large","largestImageThreshold","basic","Modernizr","highresdisplay","noSpreadLayoutThreshold","margin","windowHeight","height","captionHeight","outerHeight","caption","activeIndex","activeId","initSlide","State","History","getState","hashState","hash","slice","on","Spreads","containerHeight","containerMargin","init","_this","firstSpread","containerLayoutFix","resizeImages","e","target","tagName","nextSpread","resize","debounce","parseInt","css","children","imageMaxHeight","imageWrapHeight","position","top","scale","imageCaptionHeight","find","length","eq","addClass","spreadColor","activeSpread","next","removeClass","first","Slick","event","slick","slidesLength","remove","imagesLoaded","fade","speed","prevArrow","nextArrow","max-height","margin-top","jQuery","document","ready","packery","itemSelector","transitionDuration","percentPosition","opacity","hasClass"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Modernizr */\n\nfunction l(data) {\n  'use strict';\n  console.log(data);\n}\n\nfunction getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n\n// VARS\n\nvar retina = Modernizr.highresdisplay,\n  largeImageThreshold = 800,\n  largestImageThreshold = 1400,\n\n  noSpreadLayoutThreshold = 600,\n\n  margin = 35,\n\n  windowHeight = $(window).height(),\n  windowWidth = $(window).width(),\n\n  captionHeight = $('#single-slider-text').outerHeight(),\n\n  caption,\n  activeIndex,\n  activeId,\n  initSlide,\n  State = History.getState(),\n  hashState = State.hash.slice(-1);\n\n\n// FUNCTIONS\n\n$(window).on('resize', function() {\n  windowHeight = $(window).height();\n  windowWidth = $(window).width();\n});\n\n  // LAZY IMAGES\n\nfunction lazyLoadImages(selector) {\n  $(selector).each(function() {\n    var $this = $(this);\n    var data = $this.data();\n    var windowWidth = $(window).width();\n\n    if (retina) {\n      if (windowWidth > (largeImageThreshold*1.5)) {\n        $this.attr('src', data.largest);\n      } else {\n        $this.attr('src', data.large);\n      }\n    } else if (windowWidth > largestImageThreshold) {\n      $this.attr('src', data.largest);\n    } else if (windowWidth > largeImageThreshold) {\n      $this.attr('src', data.large);\n    } else {\n      $this.attr('src', data.basic);\n    }\n  });\n}\n\n\n// OBJECTS\n\n  // HOME SPREADS\n\nvar Spreads = {\n  containerHeight: 0,\n  containerMargin: 0,\n  init: function() {\n    var _this = this;\n    _this.firstSpread();\n    _this.containerLayoutFix();\n    _this.resizeImages();\n\n    $('.home-spread').on('click', function(e) {\n      l(e);\n      if (e.target.tagName !== 'A') {\n        _this.nextSpread();\n      }\n    });\n\n    $(window).resize( $.debounce( 250, function() {\n        _this.containerLayoutFix();\n        _this.resizeImages();\n      })\n    );\n  },\n\n  containerLayoutFix: function() {\n    var _this = this;\n    _this.containerMargin = parseInt($('#header').css('padding-top'), 10);\n    _this.containerHeight = windowHeight - $('#header').outerHeight(true) - _this.containerMargin;\n\n    $('#spread-container').height( _this.containerHeight );\n  },\n\n  resizeImages: function () {\n    var _this = this;\n\n    if (noSpreadLayoutThreshold > windowWidth) {\n      return false;\n    }\n\n    $('.home-spread.home-spread-active').children('.spread-image-wrapper').each(function() {\n\n      $(this).css('height','');\n\n      var $this = $(this),\n        imageWrapHeight = $this.height(),\n        imageMaxHeight,\n        position = $this.position(),\n        top = position.top,\n        scale = ($this.attr('data-scale')*0.01),\n        imageCaptionHeight = $this.find('.spread-image-caption').outerHeight();\n\n      if ((imageWrapHeight + top) > _this.containerHeight) {\n\n        $this.css({\n          'height' : (_this.containerHeight - top) + 'px'\n        });\n\n      }\n\n      imageWrapHeight = $this.height();\n\n      if (scale > 0) {\n        if (scale > 1) {\n          scale = 1;\n        }\n        imageMaxHeight = (imageWrapHeight*scale) - imageCaptionHeight;\n      } else {\n        imageMaxHeight = imageWrapHeight - imageCaptionHeight;\n      }\n\n      if (imageMaxHeight < 60) {\n        imageMaxHeight = 60;\n      }\n\n      $this.find('img.spread-image').css( 'max-height', imageMaxHeight );\n\n    });\n  },\n\n  firstSpread: function() {\n\n    var length = $('.home-spread').length;\n    var random = getRandomInt(0, length);\n\n    $('.home-spread').eq(random).addClass('home-spread-active');\n    var spreadColor = $('.home-spread-active').attr('data-color');\n    if (typeof(spreadColor) !== 'undefined') {\n      $('body').css('background-color', spreadColor);\n    } else {\n      $('body').css('background-color', 'rgb(253,253,253)');\n    }\n\n  },\n\n  nextSpread: function() {\n    var activeSpread = $('.home-spread.home-spread-active');\n    var nextSpread = activeSpread.next();\n\n    activeSpread.removeClass('home-spread-active');\n\n    if (nextSpread.length) {\n      nextSpread.addClass('home-spread-active');\n    } else {\n      $('.home-spread').first().addClass('home-spread-active');\n    }\n\n    var spreadColor = $('.home-spread-active').attr('data-color');\n    if (typeof(spreadColor) !== 'undefined') {\n      $('body').css('background-color', spreadColor);\n    } else {\n      $('body').css('background-color', 'rgb(253,253,253)');\n    }\n\n    this.resizeImages();\n\n  }\n};\n\n  // SLICK\n\nvar Slick = {\n  init: function() {\n    var _this = this;\n    $('.js-slick-container').on({\n      init: function(event, slick){\n        var currentSlideIndex = $('.slick-active').attr('data-slick-index');\n\n        // set length for n of * in captions\n        var slidesLength = $('.js-slick-item').length;\n        if (slidesLength === 1) {\n          $('.slide-nav').remove();\n        }\n\n        // lazy load images for screen resolution\n        lazyLoadImages('.slider-img');\n\n        // fade in slides when image loaded\n\n        $('.slick-active').imagesLoaded( function() {\n          $('.slick-active').find('.u-held').css( 'opacity' , 1 );\n        });\n\n\n        $('#single-slider').imagesLoaded( function() {\n          $('.u-held').css('opacity', 1);\n        });\n\n        // fix images for window height\n        _this.resizeImages();\n\n        // fade in when ready\n        $('#single-slider').css( 'opacity' , 1 );\n      },\n    })\n    .slick({\n      fade: true,\n      speed: 500,\n      prevArrow: '.slick-prev',\n      nextArrow: '.slick-next',\n    });\n\n    if (hashState > 1) {\n      initSlide = $('[data-index=\"' + hashState + '\"]').attr('data-slick-index');\n      $('.js-slick-container').slick('slickGoTo',initSlide);\n    }\n\n    $('.js-next-slide').on('click', function() {\n      $('.js-slick-container').slick('slickNext');\n    });\n\n    $(window).resize( $.debounce( 250, function() {\n        _this.resizeImages();\n      })\n    );\n  },\n\n  resizeImages: function() {\n    $('#single-slider').css( 'height', windowHeight );\n    $('.js-slick-item img').css({\n      'max-height' : ( windowHeight - captionHeight - margin ),\n      'margin-top' : margin\n    });\n  }\n};\n\n\njQuery(document).ready(function () {\n  'use strict';\n\n  // CONDITIONAL INITS\n  if ( $('.js-grid-img').length ) {\n    lazyLoadImages('.js-grid-img');\n  }\n\n  if ( $('.js-packery-container').length ) {\n\n    $('#loader').css('opacity', 1);\n\n    $('.js-packery-container').imagesLoaded( function() {\n      $('.js-packery-container').packery({\n        itemSelector: '.js-packery-item',\n        transitionDuration: '0s',\n        percentPosition: true\n      }).css({\n        'opacity': 1\n      });\n      $('#loader').css('opacity', 0);\n\n    });\n  }\n\n  if ($('#single-slider').length) {\n    $('#single-slider').css( 'height', windowHeight );\n  }\n\n  if ($('body').hasClass('home')) {\n    Spreads.init();\n  }\n\n  if ( $('.js-slick-item').length ) {\n    Slick.init();\n  }\n\n});"],"sourceRoot":"/source/"}