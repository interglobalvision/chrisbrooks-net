{"version":3,"sources":["main.js"],"names":["l","data","console","log","lazyLoadImages","selector","$","each","$this","this","windowWidth","window","width","retina","largeImageThreshold","attr","largest","large","largestImageThreshold","basic","slidesContainerLayoutFix","height","windowHeight","outerHeight","resizeSlideImages","imageHeight","offset","top","slidesMargin","css","max-height","singleLayout","padding-top","margin","captionHeight","debounce","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","clearTimeout","setTimeout","Modernizr","highresdisplay","innerHeight","resize","hasClass","Slick","init","_this","on","event","slick","currentSlideIndex","replaceCaption","html","length","resizeImages","afterChange","currentSlide","nextSlide","prevArrow","nextArrow","caption","undefined","jQuery","document","ready","imagesLoaded","packery","itemSelector","transitionDuration","percentPosition","opacity"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Modernizr */\n\nfunction l(data) {\n  'use strict';\n  console.log(data);\n}\n\n// VARS\n\nvar retina = Modernizr.highresdisplay,\n  largeImageThreshold = 800,\n  largestImageThreshold = 1400,\n\n  margin = 35,\n\n  windowHeight = $(window).innerHeight(),\n\n  captionHeight = $('#single-slider-text').outerHeight(),\n\n  slidesMargin = 70;\n\n\n// FUNCTIONS\n\n  // LAZY IMAGES\n\nfunction lazyLoadImages(selector) {\n  $(selector).each(function() {\n    var $this = $(this);\n    var data = $this.data();\n    var windowWidth = $(window).width();\n\n    if (retina) {\n      if (windowWidth > (largeImageThreshold*1.5)) {\n        $this.attr('src', data.largest);\n      } else {\n        $this.attr('src', data.large);\n      }\n    } else if (windowWidth > largestImageThreshold) {\n      $this.attr('src', data.largest);\n    } else if (windowWidth > largeImageThreshold) {\n      $this.attr('src', data.large);\n    } else {\n      $this.attr('src', data.basic);\n    }\n  });\n}\n\n  // LAYOUT\n\n$(window).resize(function() {\n  windowHeight = $(window).innerHeight();\n\n  if ($('body').hasClass('home')) {\n    slidesContainerLayoutFix();\n    resizeSlideImages();\n  }\n});\n\nfunction slidesContainerLayoutFix() {\n  $('#slide-container').height( windowHeight - $('#header').outerHeight() );\n}\n\nfunction resizeSlideImages() {\n  $('.slide-image').each(function() {\n\n    var $this = $(this);\n    var imageHeight = $this.height();\n    var offset = $this.offset();\n    var top = offset.top;\n\n    if ((imageHeight + top + slidesMargin) > windowHeight) {\n\n      if (top < 20) {\n        top = 20;\n      }\n\n      $this.css({\n        'max-height' : (windowHeight - top - slidesMargin) + 'px'\n      });\n\n    } else {\n\n      $this.css({\n        'max-height' : (windowHeight - slidesMargin) + 'px'\n      });\n\n    }\n\n  });\n}\n\nfunction singleLayout() {\n  $('#single-slider').css({\n    'padding-top': margin,\n    'height': (windowHeight - captionHeight)\n  });\n}\n\nif ($('body').hasClass('home')) {\n  slidesContainerLayoutFix();\n  resizeSlideImages();\n}\n\nif ($('body').hasClass('single')) {\n  singleLayout();\n}\n\n  // RESIZE\n\nfunction debounce(func, wait, immediate) {\n  var timeout;\n  return function() {\n    var context = this, args = arguments;\n    var later = function() {\n      timeout = null;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n    var callNow = immediate && !timeout;\n    clearTimeout(timeout);\n    timeout = setTimeout(later, wait);\n    if (callNow) {\n      func.apply(context, args);\n    }\n  };\n}\n\n  // SLICK\n\nvar Slick = {\n  init: function() {\n    var _this = this;\n    $('.js-slick-container').on({\n      init: function(event, slick){\n        var currentSlideIndex = $('.slick-active').attr('data-slick-index');\n        // set caption\n        _this.replaceCaption(currentSlideIndex);\n\n        // set length for n of * in captions\n        $('#slick-length').html($('.js-slick-item').length-2);\n\n        // lazy load images for screen resolution\n        lazyLoadImages('.slider-img');\n\n        // fix images for window height\n        _this.resizeImages();\n\n        // fade in when ready\n        $('#single-slider').css( 'opacity' , 1 );\n        $('#single-slider-text').css( 'opacity' , 1 );\n      },\n      afterChange: function(event, slick, currentSlide, nextSlide){\n        // set caption\n        _this.replaceCaption(currentSlide);\n\n        // set active index in human readable form\n        $('#slick-current-index').html(currentSlide+1);\n      }\n    })\n    .slick({\n      prevArrow: '#slick-prev',\n      nextArrow: '#slick-next',\n    });\n\n    $('.js-slick-item').on('click', function() {\n      $('.js-slick-container').slick('slickNext');\n    });\n  },\n\n  replaceCaption: function(currentSlide) {\n    var caption = $('[data-slick-index=\"' + currentSlide + '\"]').data('caption');\n    if (! caption || caption === undefined || caption === null) {\n      $('#slick-caption').html(' ');\n    } else {\n      $('#slick-caption').html(caption);\n    }\n  },\n\n  resizeImages: function() {\n    $('.js-slick-item img').css( 'max-height' , ( windowHeight - captionHeight - margin ) );\n  }\n};\n\n\njQuery(document).ready(function () {\n  'use strict';\n  l('Hola Globie');\n\n// PACKERY\n  if ( $('.js-packery-container').length ) {\n    $('.js-packery-container').imagesLoaded( function() {\n      $('.js-packery-container').packery({\n        itemSelector: '.js-packery-item',\n        transitionDuration: '0s',\n        percentPosition: true\n      }).css({\n        'opacity': 1\n      });\n    });\n  }\n\n// SLICK\n/*\n  var resizeFunction = debounce(function() {\n    resizeImages();\n  }, 30);\n*/\n\n  if ( $('.js-slick-item').length ) {\n    Slick.init();\n  }\n\n  $(window).on('resize', function() {\n    Slick.resizeImages();\n  });\n\n});"],"sourceRoot":"/source/"}