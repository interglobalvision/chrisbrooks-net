{"version":3,"sources":["main.js"],"names":["l","data","console","log","lazyLoadImages","selector","$","each","$this","this","windowWidth","window","width","retina","largeImageThreshold","attr","largest","large","largestImageThreshold","basic","singleLayout","css","padding-top","margin","height","windowHeight","captionHeight","Modernizr","highresdisplay","innerHeight","outerHeight","caption","activeIndex","initSlide","State","History","getState","hashState","state","resize","Spreads","init","_this","containerLayoutFix","resizeImages","on","nextSpread","children","imageHeight","offset","top","max-height","activeSpread","next","removeClass","length","addClass","first","Slick","event","slick","currentSlideIndex","replaceCaption","slidesLength","html","remove","afterChange","currentSlide","history","pushState","fade","speed","prevArrow","nextArrow","pushSlideState","undefined","jQuery","document","ready","imagesLoaded","packery","itemSelector","transitionDuration","percentPosition","opacity","hasClass"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Modernizr */\n\nfunction l(data) {\n  'use strict';\n  console.log(data);\n}\n\n// VARS\n\nvar retina = Modernizr.highresdisplay,\n  largeImageThreshold = 800,\n  largestImageThreshold = 1400,\n\n  margin = 35,\n\n  windowHeight = $(window).innerHeight(),\n\n  captionHeight = $('#single-slider-text').outerHeight(),\n\n  caption,\n  activeIndex,\n  initSlide,\n  State = History.getState(),\n  hashState = State.data.state;\n\n\n// FUNCTIONS\n\n  // LAZY IMAGES\n\nfunction lazyLoadImages(selector) {\n  $(selector).each(function() {\n    var $this = $(this);\n    var data = $this.data();\n    var windowWidth = $(window).width();\n\n    if (retina) {\n      if (windowWidth > (largeImageThreshold*1.5)) {\n        $this.attr('src', data.largest);\n      } else {\n        $this.attr('src', data.large);\n      }\n    } else if (windowWidth > largestImageThreshold) {\n      $this.attr('src', data.largest);\n    } else if (windowWidth > largeImageThreshold) {\n      $this.attr('src', data.large);\n    } else {\n      $this.attr('src', data.basic);\n    }\n  });\n}\n\n  // LAYOUT\n\n$(window).resize(function() {\n  windowHeight = $(window).innerHeight();\n});\n\nfunction singleLayout() {\n  $('#single-slider').css({\n    'padding-top': margin,\n    'height': (windowHeight - captionHeight)\n  });\n}\n\n// OBJECTS\n\n  // HOME SPREADS\n\nvar Spreads = {\n  init: function() {\n    var _this = this;\n    _this.containerLayoutFix();\n    _this.resizeImages();\n\n    $('.spread-image').on('click', function() {\n      _this.nextSpread();\n    });\n\n    $(window).resize(function() {\n      _this.containerLayoutFix();\n      _this.resizeImages();\n    });\n  },\n\n  containerLayoutFix: function() {\n    $('#spread-container').height( windowHeight - $('#header').outerHeight(true) );\n  },\n\n  resizeImages: function () {\n    $('.home-spread.home-spread-active').children('.spread-image').each(function() {\n\n      var $this = $(this);\n      var imageHeight = $this.height();\n      var offset = $this.offset();\n      var top = offset.top;\n\n      if ((imageHeight + top) > windowHeight) {\n\n        if (top < 20) {\n          top = 20;\n        }\n\n        $this.css({\n          'max-height' : (windowHeight - top) + 'px'\n        });\n\n      } else {\n\n        $this.css({\n          'max-height' : (windowHeight) + 'px'\n        });\n\n      }\n\n    });\n  },\n\n  nextSpread: function() {\n    var activeSpread = $('.home-spread.home-spread-active');\n    var nextSpread = activeSpread.next();\n\n    activeSpread.removeClass('home-spread-active');\n\n    if (nextSpread.length) {\n      nextSpread.addClass('home-spread-active');\n    } else {\n      $('.home-spread').first().addClass('home-spread-active');\n    }\n\n    this.resizeImages();\n\n  }\n};\n\n  // SLICK\n\nvar Slick = {\n  init: function() {\n    var _this = this;\n    $('.js-slick-container').on({\n      init: function(event, slick){\n        var currentSlideIndex = $('.slick-active').attr('data-slick-index');\n        // set caption\n        _this.replaceCaption(currentSlideIndex);\n\n        // set length for n of * in captions\n        var slidesLength = $('.js-slick-item').length;\n        if (slidesLength === 1) {\n          $('#slick-length').html(1);\n          $('#slide-nav').remove();\n        } else {\n          $('#slick-length').html(slidesLength);\n        }\n\n        // lazy load images for screen resolution\n        lazyLoadImages('.slider-img');\n\n        // fix images for window height\n        _this.resizeImages();\n\n        // fade in when ready\n        $('#single-slider').css( 'opacity' , 1 );\n        $('#single-slider-text').css( 'opacity' , 1 );\n      },\n      afterChange: function(event, slick, currentSlide){\n        // set caption\n        _this.replaceCaption(currentSlide);\n\n        // set active index in human readable form\n        activeIndex = $('[data-slick-index=\"'+currentSlide+'\"]').attr('data-number');\n        $('#slick-current-index').html(activeIndex);\n\n        caption = $('[data-slick-index=\"'+currentSlide+'\"]').attr('data-caption');\n\n        console.log(caption+' '+activeIndex);\n        //_this.pushSlideState(activeIndex,caption);\n        history.pushState({state: activeIndex}, caption, \"#\"+activeIndex);\n      },\n    })\n    .slick({\n      fade: true,\n      speed: 500,\n      prevArrow: '#slick-prev',\n      nextArrow: '#slick-next',\n    });\n\n    if (hashState > 1) {\n      initSlide = $('[data-number=\"' + hashState + '\"]').attr('data-slick-index');\n      $('.js-slick-container').slick('slickGoTo',initSlide);\n    }\n\n    $('.js-slick-item').on('click', function() {\n      $('.js-slick-container').slick('slickNext');\n    });\n\n    $(window).on('resize', function() {\n      _this.resizeImages();\n    });\n  },\n\n  pushSlideState: function(activeIndex, caption) {\n    History.pushState({state:activeIndex}, null, \"#\"+activeIndex);\n    console.log('push');\n  },\n\n  replaceCaption: function(currentSlide) {\n    var caption = $('[data-slick-index=\"' + currentSlide + '\"]').data('caption');\n    if (! caption || caption === undefined || caption === null) {\n      $('#slick-caption').html(' ');\n    } else {\n      $('#slick-caption').html(caption);\n    }\n  },\n\n  resizeImages: function() {\n    $('.js-slick-item img').css( 'max-height' , ( windowHeight - captionHeight - margin ) );\n  }\n};\n\n\njQuery(document).ready(function () {\n  'use strict';\n  l('Hola Globie');\n\n  // CONDITIONAL INITS\n\n  if ( $('.js-packery-container').length ) {\n    $('.js-packery-container').imagesLoaded( function() {\n      $('.js-packery-container').packery({\n        itemSelector: '.js-packery-item',\n        transitionDuration: '0s',\n        percentPosition: true\n      }).css({\n        'opacity': 1\n      });\n    });\n  }\n\n  if ($('body').hasClass('single')) {\n    singleLayout();\n  }\n\n  if ($('body').hasClass('home')) {\n    Spreads.init();\n  }\n\n  if ( $('.js-slick-item').length ) {\n    Slick.init();\n  }\n\n});"],"sourceRoot":"/source/"}