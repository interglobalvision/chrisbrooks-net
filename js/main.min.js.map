{"version":3,"sources":["main.js"],"names":["getRandomInt","min","max","Math","floor","random","lazyLoadImages","selector","smallRetina","largeImageThreshold","$","each","$this","this","data","retina","windowWidth","largerImageThreshold","attr","largest","basic","large","largestImageThreshold","larger","imagesLoaded","images","img","className","length","packery","Modernizr","highresdisplay","noSpreadLayoutThreshold","margin","galleryAnimationLength","windowHeight","window","height","width","captionHeight","outerHeight","initSlide","State","History","getState","hashGalleryValue","parseInt","hash","substring","indexOf","on","Spreads","containerHeight","containerMargin","init","_this","firstSpread","containerLayoutFix","resizeImages","e","target","tagName","nextSpread","resize","debounce","css","children","imageWrapHeight","imageMaxHeight","position","top","scale","imageCaptionHeight","find","eq","addClass","spreadColor","activeSpread","next","removeClass","first","Slick","slidesLength","remove","slick","fade","speed","prevArrow","nextArrow","location","preventDefault","max-height","jQuery","document","ready","itemSelector","columnWidth","transitionDuration","percentPosition","hasClass"],"mappings":"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","file":"main.min.js","sourcesContent":["/* jshint browser: true, devel: true, indent: 2, curly: true, eqeqeq: true, futurehostile: true, latedef: true, undef: true, unused: true */\n/* global $, jQuery, document, Modernizr, History */\n\nfunction getRandomInt(min, max) {\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n\n// VARS\n\nvar retina = Modernizr.highresdisplay,\n  largeImageThreshold = 1100,\n  largerImageThreshold = 1600,\n  largestImageThreshold = 2000,\n\n  noSpreadLayoutThreshold = 600,\n\n  margin = 35,\n\n  galleryAnimationLength = 500,\n\n  windowHeight = $(window).height(),\n  windowWidth = $(window).width(),\n\n  captionHeight = $('.single-slider-text').outerHeight(),\n\n  initSlide,\n  State = History.getState(),\n  hashGalleryValue = parseInt(State.hash.substring(State.hash.indexOf('#') + 1));\n\n\n// FUNCTIONS\n\n$(window).on('resize', function() {\n  windowHeight = $(window).height();\n  windowWidth = $(window).width();\n});\n\n  // LAZY IMAGES\n\nfunction lazyLoadImages(selector) {\n  var smallRetina = (largeImageThreshold / 2);\n\n  $(selector).each(function() {\n    var $this = $(this);\n    var data = $this.data();\n\n    if (retina) {\n      if (windowWidth > largerImageThreshold) {\n        $this.attr('src', data.largest);\n      } if (windowWidth < smallRetina) {\n        $this.attr('src', data.basic);\n      } else {\n        $this.attr('src', data.large);\n      }\n\n    } else if (windowWidth > largestImageThreshold) {\n      $this.attr('src', data.largest);\n    } else if (windowWidth > largerImageThreshold) {\n      $this.attr('src', data.larger);\n    } else if (windowWidth > largeImageThreshold) {\n      $this.attr('src', data.large);\n    } else {\n      $this.attr('src', data.basic);\n    }\n\n    $this.imagesLoaded(function() {\n      this.images[0].img.className += ' img-loaded';\n\n      if ( $('.js-packery-container').length ) {\n        $('.js-packery-container').packery();\n      }\n    });\n\n  });\n}\n\n\n// OBJECTS\n\n  // HOME SPREADS\n\nvar Spreads = {\n  containerHeight: 0,\n  containerMargin: 0,\n  init: function() {\n    var _this = this;\n\n    lazyLoadImages('.spread-image');\n\n    _this.firstSpread();\n    _this.containerLayoutFix();\n    _this.resizeImages();\n\n    $('.home-spread').on('click', function(e) {\n      if (e.target.tagName !== 'A') {\n        _this.nextSpread();\n      }\n    });\n\n    $(window).resize( $.debounce( 250, function() {\n        _this.containerLayoutFix();\n        _this.resizeImages();\n      })\n    );\n  },\n\n  containerLayoutFix: function() {\n    var _this = this;\n    _this.containerMargin = parseInt($('#header').css('padding-top'), 10);\n    _this.containerHeight = windowHeight - $('#header').outerHeight(true) - _this.containerMargin;\n\n    $('#spread-container').height( _this.containerHeight );\n  },\n\n  resizeImages: function () {\n    var _this = this;\n\n    if (noSpreadLayoutThreshold > windowWidth) {\n      return false;\n    }\n\n    $('.home-spread.home-spread-active').children('.spread-image-wrapper').each(function() {\n\n      $(this).css('height','');\n\n      var $this = $(this),\n        imageWrapHeight = $this.height(),\n        imageMaxHeight = 0,\n        position = $this.position(),\n        top = position.top,\n        scale = ($this.attr('data-scale')*0.01),\n        imageCaptionHeight = $this.find('.spread-image-caption').outerHeight();\n\n      if ((imageWrapHeight + top) > _this.containerHeight) {\n\n        $this.css({\n          'height' : (_this.containerHeight - top) + 'px'\n        });\n\n      }\n\n      imageWrapHeight = $this.height();\n      // why is this set again in the same way?\n\n      if (scale > 0) {\n        if (scale > 1) {\n          scale = 1;\n        }\n        imageMaxHeight = (imageWrapHeight*scale) - imageCaptionHeight;\n      } else {\n        imageMaxHeight = imageWrapHeight - imageCaptionHeight;\n      }\n\n      if (imageMaxHeight < 60) {\n        imageMaxHeight = 60;\n      }\n\n      $this.find('.spread-image').css( 'max-height', imageMaxHeight );\n\n    });\n  },\n\n  firstSpread: function() {\n\n    var length = $('.home-spread').length;\n    var random = getRandomInt(0, length);\n\n    $('.home-spread').eq(random).addClass('home-spread-active');\n    var spreadColor = $('.home-spread-active').attr('data-color');\n    if (typeof(spreadColor) !== 'undefined') {\n      $('body').css('background-color', spreadColor);\n    } else {\n      $('body').css('background-color', 'rgb(253,253,253)');\n    }\n\n  },\n\n  nextSpread: function() {\n    var activeSpread = $('.home-spread.home-spread-active');\n    var nextSpread = activeSpread.next();\n\n    activeSpread.removeClass('home-spread-active');\n\n    if (nextSpread.length) {\n      nextSpread.addClass('home-spread-active');\n    } else {\n      $('.home-spread').first().addClass('home-spread-active');\n    }\n\n    var spreadColor = $('.home-spread-active').attr('data-color');\n    if (typeof(spreadColor) !== 'undefined') {\n      $('body').css('background-color', spreadColor);\n    } else {\n      $('body').css('background-color', 'rgb(253,253,253)');\n    }\n\n    this.resizeImages();\n\n  }\n};\n\n  // SLICK\n\nvar Slick = {\n  init: function() {\n    var _this = this;\n\n    $('.js-slick-container').on({\n      init: function() {\n\n        // set length for n of * in captions\n        var slidesLength = $('.js-slick-item').length;\n        if (slidesLength === 1) {\n          $('.slide-nav').remove();\n        }\n\n        // lazy load images for screen resolution\n        lazyLoadImages('.slider-img');\n\n        // fade in slides when image loaded\n\n        $('.slick-active').imagesLoaded( function() {\n          $('.slick-active').find('.u-held').css( 'opacity' , 1 );\n        });\n\n\n        $('#single-slider').imagesLoaded( function() {\n          $('.u-held').css('opacity', 1);\n        });\n\n        // fix images for window height\n        _this.resizeImages();\n\n        // fade in when ready\n        $('#single-slider').css( 'opacity' , 1 );\n      },\n    })\n    .slick({\n      fade: true,\n      speed: galleryAnimationLength,\n      prevArrow: '.slick-prev',\n      nextArrow: '.slick-next',\n    });\n\n    if (hashGalleryValue > 1) {\n      initSlide = $('[data-index=\"' + (hashGalleryValue - 1) + '\"]').attr('data-slick-index');\n      $('.js-slick-container').slick('slickGoTo', (hashGalleryValue - 1));\n      window.location.hash = '';\n    }\n\n    // If gallery has length next arrow advances gallery until end then allows <a> link\n    $('#single-next').on('click', function(e) {\n      if ($('.js-slick-container').slick('slickCurrentSlide') !== ($('#single-next').data('gallery-length')-1)) {\n        e.preventDefault();\n        $('.js-slick-container').slick('slickNext');\n      }\n    });\n\n    // Prev moves gallery until first slide then allows <a> link\n    $('#single-prev').on('click', function(e) {\n      if ($('.js-slick-container').slick('slickCurrentSlide') !== 0) {\n        e.preventDefault();\n        $('.js-slick-container').slick('slickPrev');\n      }\n    });\n\n    $(window).resize( $.debounce( 250, function() {\n        _this.resizeImages();\n      })\n    );\n  },\n\n  resizeImages: function() {\n    $('#single-slider').css( 'height', windowHeight );\n    $('.js-slick-item img').css({\n      'max-height' : ( windowHeight - captionHeight - (margin * 2) ),\n    });\n  }\n};\n\n\njQuery(document).ready(function () {\n  'use strict';\n\n  // CONDITIONAL INITS\n  if ( $('.js-grid-img').length ) {\n    lazyLoadImages('.js-grid-img');\n  }\n\n  if ( $('.js-packery-container').length ) {\n\n    $('#loader').css('opacity', 1);\n    $('.js-packery-container').packery({\n      itemSelector: '.js-packery-item',\n      columnWidth: '.js-packery-item',\n      transitionDuration: '0s',\n      percentPosition: true\n    });\n\n    $('.js-packery-container').imagesLoaded( function() {\n\n      $('#loader').css('opacity', 0);\n      lazyLoadImages('.js-grid-img-deferred');\n    });\n  }\n\n  if ($('#single-slider').length) {\n    $('#single-slider').css( 'height', windowHeight );\n    $('#loader').css('opacity', 1);\n    $('#single-slider').imagesLoaded( function() {\n      $('#loader').css('opacity', 0);\n    });\n  }\n\n  if ($('body').hasClass('home')) {\n    Spreads.init();\n  }\n\n  if ( $('.js-slick-item').length ) {\n    Slick.init();\n  }\n\n});"],"sourceRoot":"/source/"}