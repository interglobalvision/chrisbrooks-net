function getRandomInt(e,i){return Math.floor(Math.random()*(i-e))+e}function lazyLoadImages(e){var i=largeImageThreshold/2;$(e).each(function(){var e=$(this),a=e.data();retina?(windowWidth>largerImageThreshold&&e.attr("src",a.largest),i>windowWidth?e.attr("src",a.basic):e.attr("src",a.large)):windowWidth>largestImageThreshold?e.attr("src",a.largest):windowWidth>largerImageThreshold?e.attr("src",a.larger):windowWidth>largeImageThreshold?e.attr("src",a.large):e.attr("src",a.basic),e.imagesLoaded(function(){this.images[0].img.className+=" img-loaded",$(".js-packery-container").length&&$(".js-packery-container").packery()})})}var retina=Modernizr.highresdisplay,largeImageThreshold=1100,largerImageThreshold=1600,largestImageThreshold=2e3,noSpreadLayoutThreshold=600,margin=35,galleryAnimationLength=500,windowHeight=$(window).height(),windowWidth=$(window).width(),captionHeight=$(".single-slider-text").outerHeight(),initSlide,State=History.getState(),hashGalleryValue=parseInt(State.hash.substring(State.hash.indexOf("#")+1));$(window).on("resize",function(){windowHeight=$(window).height(),windowWidth=$(window).width()});var Spreads={containerHeight:0,containerMargin:0,init:function(){var e=this;lazyLoadImages(".spread-image"),e.firstSpread(),e.containerLayoutFix(),e.resizeImages(),$(".home-spread").on("click",function(i){"A"!==i.target.tagName&&e.nextSpread()}),$(window).resize($.debounce(250,function(){e.containerLayoutFix(),e.resizeImages()}))},containerLayoutFix:function(){var e=this;e.containerMargin=parseInt($("#header").css("padding-top"),10),e.containerHeight=windowHeight-$("#header").outerHeight(!0)-e.containerMargin,$("#spread-container").height(e.containerHeight)},resizeImages:function(){var e=this;return noSpreadLayoutThreshold>windowWidth?!1:void $(".home-spread.home-spread-active").children(".spread-image-wrapper").each(function(){$(this).css("height","");var i=$(this),a=i.height(),t=0,r=i.position(),s=r.top,n=.01*i.attr("data-scale"),o=i.find(".spread-image-caption").outerHeight();a+s>e.containerHeight&&i.css({height:e.containerHeight-s+"px"}),a=i.height(),n>0?(n>1&&(n=1),t=a*n-o):t=a-o,60>t&&(t=60),i.find(".spread-image").css("max-height",t)})},firstSpread:function(){var e=$(".home-spread").length,i=getRandomInt(0,e);$(".home-spread").eq(i).addClass("home-spread-active");var a=$(".home-spread-active").attr("data-color");"undefined"!=typeof a?$("body").css("background-color",a):$("body").css("background-color","rgb(253,253,253)")},nextSpread:function(){var e=$(".home-spread.home-spread-active"),i=e.next();e.removeClass("home-spread-active"),i.length?i.addClass("home-spread-active"):$(".home-spread").first().addClass("home-spread-active");var a=$(".home-spread-active").attr("data-color");"undefined"!=typeof a?$("body").css("background-color",a):$("body").css("background-color","rgb(253,253,253)"),this.resizeImages()}},Slick={init:function(){var e=this;$(".js-slick-container").on({init:function(){var i=$(".js-slick-item").length;1===i&&$(".slide-nav").remove(),lazyLoadImages(".slider-img"),$(".slick-active").imagesLoaded(function(){$(".slick-active").find(".u-held").css("opacity",1)}),$("#single-slider").imagesLoaded(function(){$(".u-held").css("opacity",1)}),e.resizeImages(),$("#single-slider").css("opacity",1)}}).slick({fade:!0,speed:galleryAnimationLength,prevArrow:".slick-prev",nextArrow:".slick-next"}),hashGalleryValue>1&&(initSlide=$('[data-index="'+(hashGalleryValue-1)+'"]').attr("data-slick-index"),$(".js-slick-container").slick("slickGoTo",hashGalleryValue-1),window.location.hash=""),$("#single-next").on("click",function(e){$(".js-slick-container").slick("slickCurrentSlide")!==$("#single-next").data("gallery-length")-1&&(e.preventDefault(),$(".js-slick-container").slick("slickNext"))}),$("#single-prev").on("click",function(e){0!==$(".js-slick-container").slick("slickCurrentSlide")&&(e.preventDefault(),$(".js-slick-container").slick("slickPrev"))}),$(window).resize($.debounce(250,function(){e.resizeImages()}))},resizeImages:function(){$("#single-slider").css("height",windowHeight),$(".js-slick-item img").css({"max-height":windowHeight-captionHeight-2*margin})}};jQuery(document).ready(function(){"use strict";$(".js-grid-img").length&&lazyLoadImages(".js-grid-img"),$(".js-packery-container").length&&($("#loader").css("opacity",1),$(".js-packery-container").packery({itemSelector:".js-packery-item",columnWidth:".js-packery-item",transitionDuration:"0s",percentPosition:!0}),$(".js-packery-container").imagesLoaded(function(){$("#loader").css("opacity",0),lazyLoadImages(".js-grid-img-deferred")})),$("#single-slider").length&&($("#single-slider").css("height",windowHeight),$("#loader").css("opacity",1),$("#single-slider").imagesLoaded(function(){$("#loader").css("opacity",0)})),$("body").hasClass("home")&&Spreads.init(),$(".js-slick-item").length&&Slick.init()});
//# sourceMappingURL=/main.min.js.map